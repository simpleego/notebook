# 기본적인 웹 보안
> 웹 개발 프로젝트에서 반드시 고려해야 할 보안 요소는 단순한 기술적 설정을 넘어,
> **설계부터 배포까지 전 과정에 걸쳐 통합되어야 하는 전략적 요소**입니다.
> 아래는 실무에서 자주 활용되는 **OWASP Top 10** 기준을 중심으로, 웹
> 개발자가 알아야 할 핵심 보안 항목들을 상세히 정리한 내용입니다:

---

## 🛡️ OWASP Top 10 기반 웹 보안 체크리스트

### 1. 🔐 Broken Access Control (접근 제어 실패)
- 인증 없이 관리자 페이지 접근 가능 여부
- 일반 사용자가 타인의 데이터를 조회/수정할 수 있는지
- URL 파라미터 조작으로 권한 상승이 가능한지

### 2. 🔑 Cryptographic Failures (암호화 실패)
- 비밀번호, 주민번호 등 민감 정보가 암호화 없이 저장/전송되는지
- HTTPS 적용 여부
- 안전한 해시 알고리즘(Bcrypt, Argon2 등) 사용 여부

### 3. 💉 Injection (인젝션 공격)
- 사용자 입력값을 SQL, OS 명령 등에 직접 사용하는지
- Prepared Statement 또는 ORM 사용 여부

### 4. 🧩 Insecure Design (불안전한 설계)
- 비밀번호 재설정, 인증 로직이 너무 단순한 방식으로 구현되어 있는지
- 기능별 권한 분리 여부

### 5. ⚙️ Security Misconfiguration (보안 설정 오류)
- 디버그 모드가 서비스에 남아 있는지
- 기본 계정/비밀번호가 초기 상태인지
- 사용하지 않는 포트나 서비스가 열려 있는지

### 6. 📦 Vulnerable and Outdated Components (취약하거나 오래된 컴포넌트)
- 라이브러리/프레임워크의 보안 패치 최신 여부
- 버전 정보 노출 여부

### 7. 👤 Identification and Authentication Failures (인증 실패)
- 인증 우회 가능 여부
- 로그인 시 계정 잠금, 시도 횟수 제한 적용 여부
- 세션 관리 방식의 안전성

### 8. 🧾 Software and Data Integrity Failures (무결성 검증 실패)
- 코드 배포 시 무결성 검증 수행 여부
- 외부 저장소에서 불명확한 출처의 코드 사용 여부

### 9. 📊 Security Logging and Monitoring Failures (로그 및 모니터링 실패)
- 로그인 실패, 관리자 접근 등의 이벤트가 로그에 남는지
- 로그 변조/삭제 가능 여부

### 10. 🌐 Server-Side Request Forgery (SSRF)
- 외부 입력을 통해 서버가 내부 주소(IP 127.0.0.1 등)에 요청을 보내는 구조인지

---

## 🧰 실무에서 유용한 보안 도구

| 도구 | 용도 |
|------|------|
| **Burp Suite** | 프록시 기반 웹 요청 분석, 수동 점검 |
| **OWASP ZAP** | 자동화된 취약점 점검, 교육용 |
| **Nikto** | 서버 보안 설정 및 취약점 스캐닝 |
| **Dependency-Check** | 라이브러리의 CVE 취약점 확인 |

---

## 📌 추가 보안 팁

- **입력값 검증 & 정제**: 모든 외부 입력은 반드시 검증하고 정제
- **최소 권한 원칙**: 사용자에게 꼭 필요한 권한만 부여
- **API 보안**: 인증, 권한 부여, 접근 통제 철저히 설계
- **민감 정보 보호**: 저장/전송 시 모두 암호화, 최신 알고리즘 사용
- **보안 로그 관리**: 의심스러운 활동을 식별할 수 있도록 설계
- **DevSecOps 적용**: 개발 생명주기 전반에 보안 통합

---

보안은 단순한 기능이 아니라 **지속적인 관심과 관리**가 필요한 문화입니다. 프로젝트 초기에 보안을 고려하면, 
나중에 발생할 수 있는 큰 사고를 예방할 수 있어요. 필요하다면 각 항목별로 실습 예제나 코드도 도와드릴게요!

# 간단한 예시 코드
좋아요! 앞서 정리한 OWASP Top 10 보안 항목들을 기반으로, 각각에 해당하는 **Java(Spring Boot)** 코드 예제를 간단하게 보여드릴게요. 실무에서 자주 마주치는 상황을 중심으로 구성했어요 👇

---

## 1. 🔐 Broken Access Control (접근 제어 실패 방지)

```java
@PreAuthorize("hasRole('ADMIN')")
@GetMapping("/admin")
public ResponseEntity<String> adminOnly() {
    return ResponseEntity.ok("관리자 전용 페이지입니다.");
}
```
> ✅ `@PreAuthorize`를 통해 역할 기반 접근 제어

---

## 2. 🔑 Cryptographic Failures (암호화 실패 방지)

```java
@Bean
public PasswordEncoder passwordEncoder() {
    return new BCryptPasswordEncoder();
}
```

```java
String encoded = passwordEncoder.encode("userPassword");
```
> ✅ 비밀번호는 반드시 Bcrypt 등으로 해시 처리 후 저장

---

## 3. 💉 Injection (SQL 인젝션 방지)

```java
@Query("SELECT u FROM User u WHERE u.email = :email")
User findByEmail(@Param("email") String email);
```
> ✅ JPQL + 파라미터 바인딩으로 인젝션 방지

---

## 4. 🧩 Insecure Design (불안전한 설계 방지)

```java
@PostMapping("/reset-password")
public ResponseEntity<?> resetPassword(@RequestBody ResetRequest request) {
    if (!request.getToken().matches("[A-Za-z0-9]{32}")) {
        return ResponseEntity.badRequest().body("잘못된 토큰 형식");
    }
    // 토큰 검증 및 비밀번호 재설정 로직
}
```
> ✅ 토큰 형식 검증, 로직 분리로 설계 보안 강화

---

## 5. ⚙️ Security Misconfiguration (보안 설정 오류 방지)

```yaml
# application.yml
server:
  error:
    include-stacktrace: never
spring:
  profiles:
    active: prod
```
> ✅ 스택 트레이스 숨김, 프로덕션 프로파일 적용

---

## 6. 📦 Vulnerable Components (취약한 라이브러리 방지)

```groovy
// build.gradle
dependencies {
    implementation 'org.springframework.boot:spring-boot-starter-web:3.1.0' // 최신 버전 유지
}
```
> ✅ 항상 최신 버전 유지, 취약점 점검 도구 활용 권장

---

## 7. 👤 Authentication Failures (인증 실패 방지)

```java
http
    .sessionManagement()
    .maximumSessions(1)
    .maxSessionsPreventsLogin(true);
```
> ✅ 세션 중복 로그인 방지, 인증 실패 시도 제한은 추가 설정 필요

---

## 8. 🧾 Integrity Failures (무결성 검증)

```java
// 파일 업로드 시 해시 검증
MessageDigest digest = MessageDigest.getInstance("SHA-256");
byte[] hash = digest.digest(file.getBytes());
```
> ✅ 업로드된 파일의 해시값을 비교하여 위변조 여부 확인

---

## 9. 📊 Logging & Monitoring Failures (로그/모니터링 실패 방지)

```java
@Slf4j
@RestController
public class LoginController {
    @PostMapping("/login")
    public ResponseEntity<?> login(@RequestBody LoginRequest request) {
        log.info("로그인 시도: {}", request.getUsername());
        // 로그인 로직
    }
}
```
> ✅ 로그인 시도, 실패, 관리자 접근 등 로그 기록

---

## 10. 🌐 SSRF 방지

```java
public boolean isSafeUrl(String url) {
    try {
        URI uri = new URI(url);
        String host = uri.getHost();
        return !host.startsWith("127.") && !host.equals("localhost");
    } catch (Exception e) {
        return false;
    }
}
```
> ✅ 내부 IP 접근 차단, URL 검증 로직 추가

---

이 코드는 보안의 기본을 다지는 출발점이에요. 실무에서는 더 정교한 정책과 도구가 필요하지만, 
위 예제만으로도 많은 취약점을 예방할 수 있어요. 
